<svg width="500" height="150" xmlns="http://www.w3.org/2000/svg">
    <foreignObject width="500" height="150">
        <style>
            .container {
                height: 130px;
                padding: 10px;
                background-color: rgb(13, 17, 23);
                color: rgb(201, 209, 217);
                font: 18px -apple-system, BlinkMacSystemFont,
                    'Segoe UI Variable', 'Segoe UI', system-ui, ui-sans-serif,
                    Helvetica, Arial, sans-serif, 'Apple Color Emoji',
                    'Segoe UI Emoji';
                display: flex;
                align-items: center;
            }
            .album-image {
                height: 130px;
                display: block;
                border-radius: 2px;
                aspect-ratio: unset;
            }
            .track-details {
                min-width: 0;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                flex-grow: 1;
            }
            h3 {
                margin: 0;
                font-size: 22px;
            }
            p {
                margin-top: 10px;
                margin-bottom: 0;
                font-size: 16px;
            }
            .truncate-text {
                max-width: 90%;
                white-space: nowrap;
                overflow-x: hidden;
                text-overflow: ellipsis;
            }
            .offline {
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                flex-grow: 1;
            }
        </style>

        <div class="container" xmlns="http://www.w3.org/1999/xhtml">
            <% if (track) { %> 
                <% if (track.albumImage) { %>
                    <img
                        class="album-image"
                        src="data:image/png;base64, <%= track.albumImage %>"
                        alt="'<%= track.name %>' by <%= track.artist %>"
                    />
                <% } %>
                <div class="track-details">
                    <h3 class="truncate-text"><%= track.name %></h3>
                    <p class="truncate-text"><%= track.artist %></p>
                </div>
            <% } else { %>
                <div class="offline">
                    <h3>Spotify is offline</h3>
                    <p>Nothing is currently playing. Check again later!</p>
                </div>
            <% } %>
        </div>
    </foreignObject>
</svg>
